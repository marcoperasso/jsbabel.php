<!DOCTYPE html>
<html lang="en">
    <head><title>My data</title></head>
    <body>
        <div class="content" >
            <div class="body row">

                <div class="col-md-3"></div>
                <div class="col-md-6 center-text">

                    <h1>My data</h1>
                </div>
                <div class="col-md-3"></div>
            </div>
            <div class="body row site">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                    <form method="post" action="mydata/update" target="res" role="form">
                        <fieldset class="innerfields">
                            <legend>Main data</legend>
                            <div class="form-group">
                                <label for ="userId">User id</label>
                                <input id="userId" name="userid" class="form-control" type="text" value= "{{data.user.userid}}"/>
                            </div>
                            <div class="form-group">
                                <label for ="userName">First name</label>
                                <input id="userName" name="name" class="form-control" type="text" value= "{{data.user.name}}"/>
                            </div>
                            <div class="form-group">
                                <label for ="userSurname">Second name</label>
                                <input id="userSurname" name="surname" class="form-control" type="text" value= "{{data.user.surname}}"/>
                            </div>
                            <div class="form-group">
                                <label for ="mail">E-mail</label>
                                <input id="mail" name="mail" class="form-control" type="text" value= "{{data.user.mail}}"/>
                            </div>

                        </fieldset>
                    </form> 
                </div>
                <div class="col-md-2"></div>

            </div>

        </div>
        <script type="text/javascript">

            //this is the request than angularjs will send to server to populate controller
            //see header.html
            //window.controllerRequest = "mydata/user_data";

            window.controllerReady = function () {

                   $(".form-control").change(somethingChanged);

            };
            this.somethingChanged = function () {
                elementChanged(this);
            }
            this.elementChanged = function (el)
            {
                var data = $(el).parents("form").serialize();
                $.post("mydata/update", data, function (res) {
                    if (res.code !== 0)
                        showError(res.code);
                });
            }

        </script>
    </body>

</html>
